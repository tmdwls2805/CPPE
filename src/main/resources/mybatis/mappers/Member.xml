<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="itc.hoseo.cppe.member.MemberRepository">

	<select id="getMember" resultType="Member"
		parameterType="Member">
		SELECT
		id,
		password,
		name,
		email1,
		email2,
		sent,
		ph1,
		ph2,
		ph3,
		gender,
		birth1,
		birth2,
		birth3,
		smoking,
		vehicle,
		zipcode,
		addr1,
		addr2,
		regdate
		FROM
		member
		WHERE
		id = #{id}
		<if
			test="@org.springframework.util.StringUtils@isEmpty(password) == false">
			and password = #{password}
		</if>
	</select>

	<select id="getName" resultType="String">
		SELECT name 
		FROM member 
		WHERE id = #{id}
	</select>

	<select id="getCount" resultType="int">
		select count(*) from member
	</select>

	<select id="getAllMemebers" resultType="Member">
		SELECT
		id,
		password,
		name,
		email1,
		email2,
		sent,
		ph1,
		ph2,
		ph3,
		gender,
		birth1,
		birth2,
		birth3,
		smoking,
		vehicle,
		zipcode,
		addr1,
		addr2,
		regdate
		FROM member
	</select>

	<insert id="addMemeber" parameterType="Member">
		INSERT INTO member VALUES
		(
		#{id},
		#{password},
		#{name},
		#{email1},
		#{email2},
		#{sent},
		#{ph1},
		#{ph2},
		#{ph3},
		#{gender},
		#{birth1},
		#{birth2},
		#{birth3},
		#{smoking},
		#{vehicle},
		#{zipcode},
		#{addr1},
		#{addr2},
		now());
	</insert>

	<delete id="deleteMemeber" parameterType="String">
		DELETE FROM member
		WHERE id = #{id}
	</delete>

	<update id="updateMemeber" parameterType="Member">
		UPDATE member
		SET
		password = #{password},
		name = #{name},
		email1 = #{email1},
		email2 = #{email2},
		sent = #{sent},
		ph1 = #{ph1},
		ph2 = #{ph2},
		ph3 =
		#{ph3},
		gender = #{gender},
		birth1 = #{birth1},
		birth2 = #{birth2},
		birth3 = #{birth3},
		smoking = #{smoking},
		vehicle = #{vehicle},
		zipcode =
		#{zipcode},
		addr1 = #{addr1},
		addr2 = #{addr2}
		WHERE id = #{id};
	</update>

	<select id="getFindId" parameterType="Member" resultType="Member">
		SELECT id
		FROM member
		WHERE
		name = #{name}
		and email1 = #{email1}
		and email2 = #{email2}
		and ph1 = #{ph1}
		and ph2 = #{ph2}
		and ph3 = #{ph3}
	</select>
	
	<select id="getFindPassword" parameterType="Member" resultType="Member">
		SELECT id
		FROM member
		WHERE 
		id = #{id}
		and name = #{name}
	</select>

	
	<update id="lostPasswordUpdate" parameterType="Member">
		UPDATE member
		SET password = #{password}
		WHERE id = #{id}
	</update>
	
	<select id="idCheck" parameterType="String" resultType="int">
		SELECT count(id)
		FROM MEMBER
		WHERE id = #{id}
	</select>
	
		<select id="getUser" resultType="Member"
		parameterType="Member">
		SELECT
		id,
		password,
		name,
		email1,
		email2,
		sent,
		ph1,
		ph2,
		ph3,
		gender,
		birth1,
		birth2,
		birth3,
		smoking,
		vehicle,
		zipcode,
		addr1,
		addr2,
		regdate
		FROM
		member
		WHERE
		id = #{id}
		</select>
	
</mapper>