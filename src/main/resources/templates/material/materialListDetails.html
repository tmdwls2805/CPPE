<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Mobile Specific Meta -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Favicon-->
<link rel="shortcut icon" href="img/logo1.png">
<!-- Author Meta -->
<meta name="author" content="colorlib">
<!-- Meta Description -->
<meta name="description" content="">
<!-- Meta Keyword -->
<meta name="keywords" content="">
<!-- meta character set -->
<meta charset="UTF-8">
<!-- Site Title -->
<title>내일의 레시피</title>

<!-- CSS ============================================= -->
<link rel="stylesheet" th:href="@{/css/linearicons.css}">
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
<link rel="stylesheet" th:href="@{/css/bootstrap.css}">
<link rel="stylesheet" th:href="@{/css/magnific-popup.css}">
<link rel="stylesheet" th:href="@{/css/jquery-ui.css}">
<link rel="stylesheet" th:href="@{/css/nice-select.css}">
<link rel="stylesheet" th:href="@{/css/animate.min.css}">
<link rel="stylesheet" th:href="@{/css/owl.carousel.css}">
<link rel="stylesheet" th:href="@{/css/main.css}">
<link rel="stylesheet" th:href="@{/slick/slick.css}"/>
<link rel="stylesheet" th:href="@{/slick/slick-theme.css}" />
<link rel="stylesheet" th:href="@{/css/mk/materialListDetails.css?after}">

</head>
<body>
	<div th:replace="~{header :: header}"></div>
	<!-- #header -->
	<section class="relative about-banner">
		<div class="overlay overlay-bg"></div>
		<div class="container">
			<div class="row d-flex align-items-center justify-content-center">
				<div class="about-content col-lg-12">
					<h1 class="text-white">식재료</h1>
				</div>
			</div>
		</div>
	</section>
	<!-- End banner Area -->
	<!-- Start contact-page Area -->
	<section class="contact-page-area section-gap">
		<div class="container">
		
			<div class="row">
				
				<form name="form" method="post" th:action="@{/materialListDetails/cart}">
					<table class="productTable">
						<tr>
							<td rowspan="5" class="productTdImg"><img class="productImg" th:src="@{'/upload/product/'+${product.productImg}}" style="width:500px; height:500px; border-radius:0px;"></td>
							<td class="productBlank"></td>
							
							<td class="productTd"  colspan="2">
								<div class="productTop">
									<img src="img/mk/productTop.png" style="height:45px; width:588px;">
								</div>
								<div class="productMiddle">
									<h2 class="productName" th:text="${product.productName}"></h2>
									<div class="productOriginDiv">
										<span class="productOrigin">원산지:</span>
										<span class="productOrigin" th:text="${product.productOrigin}"></span>								
									</div>
								</div>
									<span class="productPrice" th:text="${product.productPrice}"></span>
									<span class="productWon">원</span><br><br>
								<div class="productVolume">
									(<span th:text="${product.productVolume}"></span> 당 : <span th:text="${product.productPrice}"></span>원)
								</div>
								<div class="productCount"  th:if="${product.productCount!=0}">
									
								</div>
								<div class="productCount_SoldOut"  th:if="${product.productCount == 0}">
									 일시품절
								</div>
							</td>
						</tr>
						
						<tr class="productEx2">
							<td class="productBlank"></td>
							<td  colspan="2"></td>
						</tr>
						
						<tr  th:if="${product.productCount!=0}">
							<td class="productBlank"></td>
							<td class="productEx3 productSaleCount" colspan="2">
								<div>
									<span class="productSaleName"  th:text="${product.productName}"></span>
								</div>
							</td>
						</tr>
						<tr  th:if="${product.productCount!=0}">
							<td class="productBlank"></td>
							<td class="productEx4 productSaleCount">
								<div class="amount">
									<a class="minus" id="minus" onclick="minus()">
										<img src="img/mk/minus.png" class="img-minus">
									</a>
								</div>
								<div class="amount">
									<span class="inpbx">
										<input type="number" name="buyCount" id="count" class="product_amount" value="1" readonly />
									</span>
								</div>
								<div class="amount">
									<a class="plus" id="plus" onclick="plus()">
										<img src="img/mk/plus.png" class="img-plus">
									</a>
								</div>	
								
							</td>
							<td  class="productEx5 product_amountBox">
								<span class="product_amountPriceWon">원</span>
								<input class="product_amountPrice" id="total_count_view" th:value="${product.productPrice}" readonly/>
								<input type="text" th:value="${product.productPrice}" id="total_count" hidden="hidden"/>
								<div>
								
								</div>
							</td>
						</tr>
						<tr  th:if="${product.productCount!=0}">
							<td class="productBlank"></td>	
							<td class="productEx6"  colspan="2">
								<div class="ex6Won">
									<span>원</span>
								</div>
								<div>
									<input name="buyAmount" class="product_amountPriceSum" id="total_count_view2" th:value="${product.productPrice}" readonly/>
								</div>
								<div class="ex6Hap">
									<span>합계</span>
								</div>
							</td>
						</tr>
						<tr  th:if="${product.productCount==0}">
							<td class="productBlank"></td>	
							<td class="productEx6"  colspan="2">
								<div class="ex6Price">
									<span>일시품절</span>
								</div>
							</td>
						</tr>
						<tr th:if="${product.productCount!=0}">
							<td></td>
							<td></td>
							<td class="productEx7" colspan="2">
								<div class="ex7Cart">
									<input class="product_cart" type="submit" value="장바구니" />
								</div>
								<div class="ex7Buy">
									<input class="product_buy" type="submit" value="바로구매" />	
								</div>	
							</td>
						</tr>
						<tr th:if="${product.productCount==0}">
							<td></td>
							<td></td>
							<td class="productEx7" colspan="2">
							</td>
						</tr>
						
						<tr>
							<td class="productBlank2" colspan="4"></td>
						</tr>
						
						
						<tr class="productTr">
							<td class="" colspan="4">
								<h3>카테고리 인기상품</h3>
							</td>
						</tr>
						<tr class="productTr2">
							<td colspan="4">
								<div class="popular_product" th:each="product2 : ${productList}">
									<div class="popular_img">
										<a th:href="@{'materialListDetails?productNum='+${product2.productNum}}">
											<img th:src="@{'/upload/product/'+${product2.productImg}}" style="width:165px; height:165px; margin:30px 0 15px 0;">
										</a>
									</div>
									<a th:href="@{'materialListDetails?productNum='+${product2.productNum}}" class="popular_name"><span th:text="${product2.productName}"></span></a>
									<div class="popular_priceDiv">
										<div class="popular_price">
											<span class="popular_price2" th:text="${product2.productPrice}"></span><span class="popular_won2">원</span>
										</div>
									</div>
									<div class="popular_volumeDiv">
										(<span th:text="${product2.productVolume}"></span>당: <span th:text="${product2.productPrice}"></span>원)
									</div>
								</div>																														
							</td>
						</tr>
						<tr>
							<td>
								<input type="text" name="productNum" th:value="${product.productNum}" hidden="hidden"/>
								<input type="text" name="productName" th:value="${product.productName}" hidden="hidden"/>
								<input type="text" name="productPrice" th:value="${product.productPrice}" hidden="hidden"/>
							</td>
						</tr>
				</table>
			</form>	
			</div>
		</div>
	</section>
	<!-- start footer Area -->
	<div th:replace="~{footer :: footer}"></div>
	<!-- End footer Area -->
</body>
<script>
var count = 1;
var countEl = document.getElementById("count");
var total_count = document.getElementById("total_count"); //추가
var total_count_view = document.getElementById("total_count_view"); //추가
var total_count_view2 = document.getElementById("total_count_view2");
function plus(){
 if(count < 20){
  count++;
  countEl.value = count;
  total_count_view.value = total_count.value * countEl.value; //추가
  total_count_view2.value = total_count_view.value;
 }else{
	 alert('최대 20개까지 구매 가능합니다.');
 }
}
function minus(){
  
  if (count > 1) {
    count--;
    countEl.value = count;
  total_count_view.value = total_count_view.value - total_count.value;
  total_count_view2.value = total_count_view.value//추가  
  }  
}
</script>
<script th:src="@{/js/vendor/jquery-2.2.4.min.js}"></script>
<script th:src="@{/js/popper.min.js}"></script>
<script th:src="@{/js/vendor/bootstrap.min.js}"></script>
<script th:src="@{/js/jquery-ui.js}"></script>
<script th:src="@{/js/easing.min.js}"></script>
<script th:src="@{/js/hoverIntent.js}"></script>
<script th:src="@{/js/superfish.min.js}"></script>
<script th:src="@{/js/jquery.ajaxchimp.min.js}"></script>
<script th:src="@{/js/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/js/jquery.nice-select.min.js}"></script>
<script th:src="@{/js/owl.carousel.min.js}"></script>
<script th:src="@{/js/isotope.pkgd.min.js}"></script>
<script th:src="@{/js/mail-script.js}"></script>
<script th:src="@{/js/main.js}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" th:src="@{/slick/slick.min.js}"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</html>